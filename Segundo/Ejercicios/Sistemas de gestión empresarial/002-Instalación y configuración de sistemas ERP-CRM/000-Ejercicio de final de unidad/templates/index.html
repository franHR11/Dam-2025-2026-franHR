{% extends "base.html" %}

{% block title %}Dashboard - Sistema de FacturaciÃ³n{% endblock %}

{% block content %}
<h2>ğŸ“Š Dashboard</h2>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon">ğŸ‘¥</div>
        <div class="stat-info">
            <h3>{{ total_clientes }}</h3>
            <p>Clientes</p>
        </div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon">ğŸ“¦</div>
        <div class="stat-info">
            <h3>{{ total_productos }}</h3>
            <p>Productos</p>
        </div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon">ğŸ“„</div>
        <div class="stat-info">
            <h3>{{ total_facturas }}</h3>
            <p>Facturas</p>
        </div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon">ğŸ’°</div>
        <div class="stat-info">
            <h3>{{ "%.2f"|format(ingresos_totales) }}â‚¬</h3>
            <p>Ingresos Totales</p>
        </div>
    </div>
</div>

<h3>ğŸ“‹ Ãšltimas Facturas</h3>

{% if ultimas_facturas %}
<table class="tabla-facturas">
    <thead>
        <tr>
            <th>NÂº Factura</th>
            <th>Cliente</th>
            <th>Fecha</th>
            <th>Total</th>
            <th>Estado</th>
            <th>Acciones</th>
        </tr>
    </thead>
    <tbody>
        {% for factura in ultimas_facturas %}
        <tr>
            <td><strong>{{ factura[1] }}</strong></td>
            <td>{{ factura[2] }}</td>
            <td>{{ factura[3] }}</td>
            <td><strong>{{ "%.2f"|format(factura[4]) }}â‚¬</strong></td>
            <td><span class="badge badge-{{ factura[5].lower() }}">{{ factura[5] }}</span></td>
            <td>
                <a href="{{ url_for('ver_factura', id=factura[0]) }}" class="btn-ver">ğŸ‘ï¸ Ver</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<div class="mensaje-vacio">
    <p>No hay facturas registradas todavÃ­a.</p>
    <a href="{{ url_for('crear_factura') }}" class="btn-primary">Crear primera factura</a>
</div>
{% endif %}
{% endblock %}
